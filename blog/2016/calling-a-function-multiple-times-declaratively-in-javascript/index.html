<!DOCTYPE html>
<html>
    <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Calling a function multiple times</title>
    <meta name="description" content="Just recently I watched the WWDC keynote. In that they introduced a new app to teach Swift programming language. The lessons taught programming through a gam...">

    <link rel="stylesheet" href="/css/main.css">
    <link rel="canonical" href="https://raghavpages.github.io/blog/2016/calling-a-function-multiple-times-declaratively-in-javascript/">
    <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?" />
    <link rel="alternate" type="application/rss+xml" title="raghavpages" href="https://raghavpages.github.io/feed.xml" />
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-78703207-1', 'auto');
  ga('send', 'pageview');
</script>

  </head>

  <body>
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-78703207-1', 'auto');
  ga('send', 'pageview');
</script>

    <main>
      <header class="site-header">
  <div class="container">
    <h1><a href="/"><img src="/images/blog2.png" alt="raghavpages"></a></h1>

    <button type="button" class="sliding-panel-button">
      <span></span>
      <span></span>
      <span></span>
    </button>

    <nav class="navbar sliding-panel-content">
      <ul>
        
          <li><a href="/about" title="About">About</a></li>
        
          <li><a href="/blog" title="Blog">Blog</a></li>
        
        <li><a href="/feed.xml" target="_blank"><i class="icon icon-feed"></i></a></li>
      </ul>
    </nav>
  </div>
</header>

<div class="sliding-panel-fade-screen"></div>


      <div class="container">
        <article role="article" class="post">

  <div class="card">
    <header class="post-header">
      <h1 class="post-title">Calling a function multiple times</h1>
      <p class="post-meta">Jun 15, 2016</p>
    </header>

    <div class="post-content">
      <p>Just recently I watched the WWDC keynote. In that they introduced a new app to teach Swift programming language. The lessons taught programming through a game. In one of the lessons, the objective was to move the game character forward and grab a gem. The character had to move forward 3 times before collecting the gem. So, it was called 3 times.</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="nf">moveForward</span><span class="p">();</span>
<span class="nf">moveForward</span><span class="p">();</span>
<span class="nf">moveForward</span><span class="p">();</span></code></pre></figure>

<p>As programmers we ask ourselves how can we avoid this duplication or code repetition. The most obvious answer is using loops which is imperative.</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="mi">3</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">moveForward</span><span class="p">();</span>
<span class="p">}</span></code></pre></figure>

<p>If there are other functions that need this behavior we are going to have many such functions with for loops around them. This can be generalized by writing a function.</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">function</span> <span class="nx">times</span><span class="p">(</span><span class="nx">func</span><span class="p">,</span> <span class="nx">number</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">number</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">func</span><span class="p">();</span>
  <span class="p">}</span>
<span class="p">}</span></code></pre></figure>

<p>Functions being first class objects in Javascript allow them to be passed as arguments to a function and then called inside. We just need to pass the function the needs repetition and how many times it needs to be repeated.</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">times</span><span class="p">(</span><span class="nx">moveForward</span><span class="p">,</span> <span class="mi">3</span><span class="p">);</span></code></pre></figure>

<p>It is looking more declarative now. We can go one step further and attach this as a method of the function as functions are objects in Javascript.</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">moveForward</span><span class="p">.</span><span class="nx">times</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">num</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">num</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">call</span><span class="p">();</span>
  <span class="p">}</span>
<span class="p">}</span></code></pre></figure>

<p>Here we are using <code class="language-plaintext highlighter-rouge">this</code> to refer to the function which behaves as an object here and using it’s call method available in <code class="language-plaintext highlighter-rouge">Function.prototype.call</code>. Now, we just need to treat the function as an object and call it with its newly attached method.</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">moveForward</span><span class="p">.</span><span class="nx">times</span><span class="p">(</span><span class="mi">3</span><span class="p">);</span></code></pre></figure>

<p>To make it available across all functions we can attach this method to the prototype of Javascript’s <code class="language-plaintext highlighter-rouge">Function</code>.</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nb">Function</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">times</span> <span class="o">=</span> <span class="nb">Function</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">times</span> <span class="o">||</span> <span class="kd">function</span><span class="p">(</span><span class="nx">num</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// check to see if this method was already attached</span>
  <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">num</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">call</span><span class="p">();</span>
  <span class="p">}</span>
<span class="p">}</span></code></pre></figure>

<p>If we needed to pass arguments to our original function, we can rewrite the implementation to incorporate variable arguments as the arguments passed is available as an <code class="language-plaintext highlighter-rouge">Object</code> called <code class="language-plaintext highlighter-rouge">arguments</code> inside the function. Then, we can use a common trick to convert the arguments to an array so that it can be passed to the <code class="language-plaintext highlighter-rouge">apply</code> method of the <code class="language-plaintext highlighter-rouge">Function</code> which is another method similar to <code class="language-plaintext highlighter-rouge">call</code> but accepts arguments as an array.</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nb">Function</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">times</span> <span class="o">=</span> <span class="nb">Function</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">times</span> <span class="o">||</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span> <span class="c1">// check to see if this method was already attached</span>
  <span class="kd">var</span> <span class="nx">args</span> <span class="o">=</span> <span class="nb">Array</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">slice</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">arguments</span><span class="p">);</span>
  <span class="kd">var</span> <span class="nx">length</span> <span class="o">=</span> <span class="nx">args</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
  <span class="kd">var</span> <span class="nx">num</span> <span class="o">=</span> <span class="nx">length</span> <span class="o">&amp;&amp;</span> <span class="nb">Number</span><span class="p">.</span><span class="nx">isInteger</span><span class="p">(</span><span class="nx">args</span><span class="p">[</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">])</span> <span class="o">&amp;&amp;</span> <span class="nx">args</span><span class="p">[</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">||</span> <span class="mi">0</span><span class="p">;</span> <span class="c1">// Treat the last argument as the count. If no arguments the number of repetitions is zero</span>
  <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">num</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">args</span><span class="p">.</span><span class="nx">pop</span><span class="p">());</span> <span class="c1">// Except the last argument, the rest of them are actual arguments to the function.</span>
  <span class="p">}</span>
<span class="p">}</span></code></pre></figure>

<p>Here is how we can call it if we have a function that accepted an argument,</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">function</span> <span class="nx">print</span><span class="p">(</span><span class="nx">message</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">message</span><span class="p">);</span>
<span class="p">}</span>
<span class="nx">print</span><span class="p">.</span><span class="nx">times</span><span class="p">(</span><span class="dl">'</span><span class="s1">Hello</span><span class="dl">'</span><span class="p">,</span> <span class="mi">3</span><span class="p">);</span></code></pre></figure>

<p>‘Hello’ will be printed 3 times.</p>

<p>This was just an overview of the power of functions in Javascript which can be used to provide a declarative approach to calling a function multiple times making the invocation generic, reusable and readable.</p>

    </div>

    
<hr>

<aside id="comments" class="disqus">
  <div class="container">
    <h3><i class="icon icon-comments-o"></i> Comments</h3>
    <div id="disqus_thread"></div>
    <script>
      var disqus_config = function() {
        this.page.url = 'https://raghavpages.github.io/blog/2016/calling-a-function-multiple-times-declaratively-in-javascript/';
        this.page.identifier = '2016-06-15 15:44:40';
      };
      (function() {
        var d = document,
        s = d.createElement('script');
        s.src = '//raghavgujjar.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
      })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
  </div>
</aside>

  </div>

</article>

      </div>

      <footer class="site-footer">
  <div class="container">
    <ul class="social">
  <li><a href="https://github.com/raghav-coding" target="_blank"><i class="icon icon-github"></i></a></li>
  <li><a href="https://twitter.com/raghav_social" target="_blank"><i class="icon icon-twitter"></i></a></li>
  <li><a href="https://docs.google.com/forms/d/1kHrmM-W-ICc6elHCWZIIK3tH-Be0McAuGFGCpl23WNg/viewform" target="_blank"><i class="icon icon-envelop"></i></a></li>
</ul>

    <p class="txt-medium-gray">
      <small>&copy;2024 All rights reserved. Made with <a href="http://jekyllrb.com/" target="_blank">Jekyll</a></small>
    </p>
  </div>
</footer>


      <script src="//code.jquery.com/jquery-1.11.3.min.js"></script>
      <script>
      $(document).ready(function() {
        $('.sliding-panel-button,.sliding-panel-fade-screen,.sliding-panel-close').on('click touchstart',function (e) {
          $('.sliding-panel-content,.sliding-panel-fade-screen').toggleClass('is-visible');
          e.preventDefault();
        });
      });
      </script>
    </main>
  </body>
</html>
